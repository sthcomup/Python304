- django开发中数据库的优化
  - 设计表时，尽量少使用外键，因为外键约束会影响插入和删除性能
  - 使用缓存，减少对数据库的访问
  - 在 orm 框架下设置表时，能用 varchar 确定字段长度时，就别用 text
  - 可以给搜索频率高的字段属性，在定义时创建索引
  - Django orm 框架下的 Querysets 本来就有缓存的
  - 如果一个页面需要多次连接数据库，最好一次性取出所有需要的数据，减少对数据库的查询次数
  - 若页面只需要数据库里某一个两个字段时，可以用 QuerySet.values()
  - 在模板标签里使用 with 标签可以缓存 Qset 的查询结果

- django 如何提升性能

  - 合理的使用缓存技术，对一些常用到的动态数据，比如首页做一个缓存，或者某些常用的数据做个缓存，设置一定得过期时间，这样减少了对数据库的压力，提升网站性能
  - 使用 celery 消息队列，将耗时的操作扔到队列里，让 worker 去监听队列里的任务，实现异步操作，比如发邮件，发短信
  - 就是代码上的一些优化，补充:nginx 部署项目也是项目优化，可以配置合适的配置参数，提升 效率，增加并发量
  - 如果太多考虑安全因素，服务器磁盘用固态硬盘读写，远远大于机械硬盘，这个技术现在没有普 及，主要是固态硬盘技术上还不是完全成熟， 相信以后会大量普及
  - 另外还可以搭建服务器集群，将并发访问请求，分散到多台服务器上处理
  - 最后就是运维工作人员的一些性能优化技术了
  
  
  
- Django并发
  >**django**
  >
  >毫无疑问，用原生django的server做处理的表现是最烂的，在10000次请求的情况下brokenpipe的几率极高，只有1400次请求被处理，成功率只有14%。
  >
  >**django + nginx**
  >
  >这次搭上了nginx做反向代理，也使的脆弱的django服务器的情况有所缓解，但成功率仍然不高（10000次请求中有3684个请求被处理）。
  >
  >**uwsgi + nginx**
  >
  >uwsgi是性能极高的一个由C编写的服务器，它使用uwsgi协议，这次让它配合nginx处理django的request，参数为4进程+2线程，性能立即直线上升，处理请求的成功率也基本在90%左右，不过在测试时遇到了一个坑，就是uwsgi在处理请求的时候发送了队列溢出的问题，因为当前测试设置的并发数为每秒1000次并发，而uwsgi的处理队列容量默认为100，导致处理请求的时间加长，而这个问题则可以通过修改somaxcon的大小解决，总的来说，使用uwsgi+nginx是一个理想的选择。
  >
  >**gunicorn + nginx**
  >
  >gunicorn跟uwsgi类似，也是一个高性能的http服务器，它由ruby的unicorn项目移植，是由python编写的，它的配置简单，而且可以灵活地搭配其他网络库，部署十分方便，在测试数据中可以看到，用这种配置运行django能在短时间内就能处理大量的并发请求，成功率在90%左右。
  >
  >**gunicorn + nginx + gevent**
  >
  >前面说的几种环境，看似不错，但我们需要追求完美！由于gunicorn是同步（sync）单线程模型的，有的时候它不免会发生一些阻塞问题，这时候我们为gunicorn加上-k gevent参数来用gevent做处理接口，这就比较靠谱地处理了阻塞问题，从数据中可以看到，gunicorn + nginx + gevent的模式不仅拥有100%的处理成功率，而且时间也在很短之内完成，是5组测试数据当中的性能最好的。

  

